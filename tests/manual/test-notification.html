<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通知组件测试</title>
    <link rel="stylesheet" href="../../dist/output.css">
    <style>
        body {
            font-family: system-ui, sans-serif;
            padding: 2rem;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .test-button {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        .test-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .success { background: #10b981; color: white; }
        .warning { background: #f59e0b; color: white; }
        .error { background: #ef4444; color: white; }
        .info { background: #3b82f6; color: white; }
        .close-all { background: #6b7280; color: white; }
        .position-test { background: #8b5cf6; color: white; }
    </style>
</head>
<body>
    <h1>通知组件测试页面</h1>
    
    <div class="test-section">
        <h2>基本通知类型测试</h2>
        <div class="test-buttons">
            <button class="test-button success" data-action="success">成功通知</button>
            <button class="test-button warning" data-action="warning">警告通知</button>
            <button class="test-button error" data-action="error">错误通知</button>
            <button class="test-button info" data-action="info">信息通知</button>
        </div>
    </div>

    <div class="test-section">
        <h2>位置测试</h2>
        <div class="test-buttons">
            <button class="test-button position-test" data-action="top-left">左上角</button>
            <button class="test-button position-test" data-action="top-center">顶部居中</button>
            <button class="test-button position-test" data-action="top-right">右上角</button>
            <button class="test-button position-test" data-action="bottom-left">左下角</button>
            <button class="test-button position-test" data-action="bottom-center">底部居中</button>
            <button class="test-button position-test" data-action="bottom-right">右下角</button>
        </div>
    </div>

    <div class="test-section">
        <h2>自定义选项测试</h2>
        <div class="test-buttons">
            <button class="test-button" data-action="custom-duration">长持续时间(10秒)</button>
            <button class="test-button" data-action="no-auto-close">无自动关闭</button>
            <button class="test-button" data-action="no-close-button">无关闭按钮</button>
            <button class="test-button" data-action="custom-style">自定义样式</button>
        </div>
    </div>

    <div class="test-section">
        <h2>批量操作</h2>
        <div class="test-buttons">
            <button class="test-button close-all" data-action="close-all">关闭所有通知</button>
            <button class="test-button" data-action="show-multiple">显示多个通知</button>
            <button class="test-button" data-action="test-stacking" style="background: #ec4899; color: white;">测试堆叠功能</button>
        </div>
    </div>

    <script type="module">
        console.log('开始加载通知组件模块...');
        
        import('../../src/utils/notification.js')
            .then(module => {
                console.log('通知组件模块导入成功', module);
                
                // 全局变量，方便在HTML中调用
                window.Notification = module.default || module;
                console.log('Notification已设置为全局变量', window.Notification);
                
                // 启用所有按钮并添加事件监听器
                document.querySelectorAll('.test-button').forEach(button => {
                    button.disabled = false;
                    button.addEventListener('click', handleButtonClick);
                });
                
                console.log('所有按钮事件监听器已添加');
            })
            .catch(error => {
                console.error('通知组件模块导入失败:', error);
                
                // 禁用所有按钮
                document.querySelectorAll('.test-button').forEach(button => {
                    button.disabled = true;
                });
                
                // 显示错误信息
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = 'background: #ef4444; color: white; padding: 1rem; margin: 1rem 0; border-radius: 6px;';
                errorDiv.innerHTML = `<strong>错误:</strong> 通知组件加载失败: ${error.message}`;
                document.body.insertBefore(errorDiv, document.body.firstChild);
            });

        // 处理按钮点击事件
        function handleButtonClick(event) {
            const action = event.target.getAttribute('data-action');
            console.log('按钮点击:', action);
            
            if (!window.Notification) {
                console.error('Notification组件尚未加载完成');
                return;
            }
            
            switch (action) {
                case 'success':
                    window.Notification.success('这是一个成功通知！操作已成功完成。');
                    break;
                case 'warning':
                    window.Notification.warning('这是一个警告通知！请注意相关事项。');
                    break;
                case 'error':
                    window.Notification.error('这是一个错误通知！操作失败，请检查。');
                    break;
                case 'info':
                    window.Notification.info('这是一个信息通知！这是普通的信息提示。');
                    break;
                case 'top-left':
                    window.Notification.info('左上角通知', { position: 'top-left' });
                    break;
                case 'top-center':
                    window.Notification.info('顶部居中通知', { position: 'top-center' });
                    break;
                case 'top-right':
                    window.Notification.info('右上角通知', { position: 'top-right' });
                    break;
                case 'bottom-left':
                    window.Notification.info('左下角通知', { position: 'bottom-left' });
                    break;
                case 'bottom-center':
                    window.Notification.info('底部居中通知', { position: 'bottom-center' });
                    break;
                case 'bottom-right':
                    window.Notification.info('右下角通知', { position: 'bottom-right' });
                    break;
                case 'custom-duration':
                    window.Notification.info('这个通知会显示10秒钟', { duration: 10000 });
                    break;
                case 'no-auto-close':
                    window.Notification.info('这个通知不会自动关闭，需要手动点击关闭', { autoClose: false });
                    break;
                case 'no-close-button':
                    window.Notification.info('这个通知没有关闭按钮，3秒后自动消失', { showCloseButton: false });
                    break;
                case 'custom-style':
                    window.Notification.info('自定义样式的通知', {
                        className: 'border-4 border-purple-500',
                        styles: {
                            backgroundColor: '#8b5cf6',
                            color: 'white',
                            fontWeight: 'bold'
                        }
                    });
                    break;
                case 'close-all':
                    window.Notification.closeAll();
                    break;
                case 'show-multiple':
                    window.Notification.success('第一个通知');
                    setTimeout(() => window.Notification.warning('第二个通知'), 500);
                    setTimeout(() => window.Notification.error('第三个通知'), 1000);
                    setTimeout(() => window.Notification.info('第四个通知'), 1500);
                    break;
                case 'test-stacking':
                    // 测试右上角堆叠
                    window.Notification.success('右上角通知 1');
                    setTimeout(() => window.Notification.warning('右上角通知 2'), 300);
                    setTimeout(() => window.Notification.error('右上角通知 3'), 600);
                    setTimeout(() => window.Notification.info('右上角通知 4'), 900);
                    
                    // 测试左上角堆叠
                    setTimeout(() => window.Notification.success('左上角通知 1', { position: 'top-left' }), 1200);
                    setTimeout(() => window.Notification.warning('左上角通知 2', { position: 'top-left' }), 1500);
                    
                    // 测试右下角堆叠
                    setTimeout(() => window.Notification.info('右下角通知 1', { position: 'bottom-right' }), 1800);
                    setTimeout(() => window.Notification.error('右下角通知 2', { position: 'bottom-right' }), 2100);
                    
                    console.log('堆叠测试已启动，将在不同位置显示多个通知');
                    break;
                default:
                    console.warn('未知的操作:', action);
            }
        }
    </script>
</body>
</html>